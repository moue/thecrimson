{% load common %}
{% load content_filters %}
{% load rotator %}

<link href="/site_media/css/rotator.css" rel="stylesheet" type="text/css" />
<script src="/site_media/scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript" src="/site_media/scripts/framework/jquery.jcarousellite.packed.js"></script>
<script type="text/javascript" src="/site_media/scripts/jquery.cycle.all.min.js"></script>
<script type="text/javascript">
$(function(){
	$('.preview_body').cycle({
	    fx:     'fade',
	    speed:  'slow',
		timeout: 3000,
	    pager:  '#preview_roll',
		next: '.nextbutton',
		prev: '.previousbutton',
	    pagerAnchorBuilder: function(idx, slide) {
	        return '#preview_roll a:eq(' + (idx) + ')';
	    }
	});
});
</script>
<div class="rotator">
    <ul class="preview_body">
		{% for article in contents %}
			{% if article.main_rel_content %}
			<li>
            {{ article.main_rel_content|to_img_tag:"300,240,5,4" }}
            <div class="preview_text">
            <h3>{{article|linkify}}</h3>
            <p class="teaser">{{article.teaser}}</p>
            </div>
    		</li>
	    	{% endif %}
        {% endfor %}
    </ul>
    <div class="carousel">
        <div class="previousbutton" style="width:14px; height:14px;"></div>
        <div id="preview_roll">
			{% for article in contents %}
                {% if article.main_rel_content %}
                    <a href="#">{{ article.main_rel_content|to_img_tag:"50,50,1,1" }}</a>
                {% endif %}
            {% endfor %}
		</div>
        <div class="nextbutton" style="width:14px; height:14px;"></div>
    </div>
    <div style="clear:both"></div>
</div>