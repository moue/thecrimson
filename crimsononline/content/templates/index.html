{% extends "threecolumn.html" %}

{% load common %}
{% load content_filters %}
{% load content_module %}
{% load rotator %}
{% load module %}
{% load tag_cloud %}
{% load top_articles %}
{% load flyby_preview %}

{% block title %}
	Harvard News
{% endblock %}

{% block css %}
	{{block.super}}
    {% static_css "index.css" %}
{% endblock %}
{% block js %}
	{{block.super}}
    {% static_js "jquery.js" %}
    {% static_js "past_issues.js" %}
{% endblock %}
{% block masthead_center %}
{% endblock %}
{% block pre_body %}
{% endblock %}

{% block leftcolumn %}
    {% module 4 "top stories" red "/section/news/" %}
        {% contentmodule index.topstories %}
        <div id="topstories" class="article_previews">
            <ul>
                {% for story in top_stories %}
                <li>
                    {% if forloop.first %}{{story|render:"top_preview"}}
                    {%else%}{{story|render:"preview"}}{%endif%}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endcontentmodule %}
    {% endmodule %}

    {% module 4 "magazine" gray "/section/fm/" %}
        {% contentmodule index.fm %}
        <div id="top_fm" class="article_feature gray-bg">
            {{ fms|first|render:"feature" }}
        </div>
        <div id="top_fms" class="article_headlines">
            <ul>
                {% for story in fms|notfirst %}
                <li>
                    {{story|render:"small_preview"}}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endcontentmodule %}
    {% endmodule %}

    {% module 4 "more news" %}
        {% contentmodule index.morenews %}
            <div id="more_news" class="article_headlines">
                <ul>
                {% for story in more_stories %}
                    <li>
                        {{story|render:"small_preview"}}
                    </li>
                {% endfor %}
                </ul>
            </div>
        {% endcontentmodule %}
    {% endmodule %}
    
{% endblock %}

{% block middlecolumn %}
    {% contentmodule index.rotater %}
        {% rotator rotate "main_rotator" %}
    {% endcontentmodule %}
    
    {% module 4 opinion gray "/section/opinion/" %}
        {% contentmodule index.opinion %}
	        <div id="top_opinion" class="article_previews">
                <ul>
                    <li>
                        {{ opeds|first|render:"preview"}}
                    </li>
                </ul>
            </div>
            <div id="top_opinions" class="article_headlines">
                <ul>
                    {% for oped in opeds|notfirst %}
                    <li>
                        {{oped|render:"small_preview"}}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        {% endcontentmodule %}
    {% endmodule %}


    {% module 4 sports gray "/section/sports/" %}
        {% contentmodule index.sports %}
	        <div id="top_sports" class="article_previews">
                <ul>
                    <li>
                        {{ sports|first|render:"preview"}}
                    </li>
                </ul>
            </div>
            <div id="top_sports" class="article_headlines">
                <ul>
                    {% for story in sports|notfirst %}
                    <li>
                        {{story|render:"small_preview"}}
                    </li>
                    {% endfor %}
                </ul>
            </div>
        {% endcontentmodule %}
    {% endmodule %}

    {% module 4 arts gray "/section/arts/" %}
        {% contentmodule index.arts %}
            <div id="top_art" class="article_feature gray-bg">
                {{ arts|first|render:"feature" }}
            </div>
            <div id="top_arts" class="article_headlines">
                <ul>
                    {% for story in arts|notfirst %}
                        <li>
                            <h3><a href="{{ story.get_absolute_url }}" >{{ story.headline }}</a></h3>
                            <p class="byline">By {{ story.contributors.all|linkify|human_list }}</p>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endcontentmodule %}
    {% endmodule %}

{% endblock %}

{% block rightcolumn %}
	{% comment %}
    {% module 4 "view past issues" %}
        <div id="past_issue">
	        {{ past_issues }}<button id="past_issues_button">Search</button>
	    </div>
	{% endmodule %}
    {% endcomment %}
    
    {% flyby_preview %}
    
    {% most_read_articles %}

    {% module 4 "" ad %}
		<div style="width:300px; margin: 0 auto;">
		<script src="http://www.paperg.com/jsfb/embed.php?pid=18&bid=15&width=300&height=250" type="text/javascript"></script>
		</div>
    {% endmodule %}
        
    {% tag_cloud 20 "Popular Tags" %}
    
    {% module 4 "Featured Videos" box %}
        {% for vid in videos %}
            {{vid|render:"front_preview"}}
        {% endfor %}
    {% endmodule %}
    
{% endblock %}

{% block belowcolumn %}
<div class="col-12">
{% module 12 "Featured Galleries" nopad %}
{% endmodule%}
</div>
<div class="front_galleries">
        <div class="col-2">
    {% for gall in galleries %}
        {{gall|render:"front_preview"}}
        </div>
        {% if forloop.last %}
        {% else %}
        <div class="gutter"></div>
        <div class="col-2">
        {% endif %}
    {% endfor %}
        <span class="clear"></span>
</div>
{% endblock %}